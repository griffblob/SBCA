#ifndef CONFIG_H
#define CONFIG_H
#include <math.h>

// LQR Gain Matrix
const float K1[3][6] = { //too weak 100 0.1 100
    {  0.316227766016838f,   8.43905679345256e-17f,   2.22454507636290e-17f,
       0.0362536949761088f,   1.56125112837913e-17f,  -3.01999204895307e-18f },

    {  2.87874694820538e-17f,   0.316227766016838f,   1.32191370051946e-15f,
      -2.05009413573882e-17f,   0.0362536949761087f,   9.07733494315401e-17f },

    {  4.50644509263475e-18f,  -1.31145094783847e-15f,   0.316227766016838f,
       9.70827435396725e-18f,  -9.69982659819751e-17f,   0.0362536949761088f }
};
const float K11[3][6] = { //too sensitive 100 1 100
    {  0.999999999999998f,   1.26587318721404e-15f,  -2.80570165375582e-16f,
       0.104852277037744f,   3.96848099135001e-17f,  -1.68983515922279e-16f },

    { -8.13853001953990e-16f,   0.999999999999999f,   5.82867087928207e-16f,
      -8.48832421387072e-18f,   0.104852277037745f,  -8.74431297485612e-17f },

    {  1.63367865915975e-15f,  -6.51151139531446e-16f,   0.999999999999998f,
       1.17698544204128e-16f,  -5.20417042793042e-18f,   0.104852277037745f }
};
const float K111[3][6] = {// to sensitive 100 0.5 100
    {  1.000000000000000f,  -8.11401164805672e-17f,  -4.80136151762037e-17f,
       0.0774209274033837f,  -1.58218359536538e-17f,   4.18405241883868e-19f },

    { -9.78409564141322e-17f,   0.999999999999999f,   1.26402387058828e-16f,
      -1.15682041799434e-17f,   0.0774209274033836f,   8.91809185837555e-18f },

    {  2.92823727114117e-17f,  -1.31767000709913e-16f,   0.999999999999999f,
       4.98699582038908e-18f,  -7.51077236430411e-18f,   0.0774209274033836f }
};
const float K2[3][6] = {//abit weak 100 0.2 100
    {  0.999999999999999f,  -2.61536703411360e-17f,   1.22796978302671e-17f,
       0.0547174560812178f,   4.44157849447664e-18f,   3.35609661028839e-19f },

    {  5.15825166722364e-18f,   0.999999999999999f,   1.62351200318539e-16f,
      -6.20155922402079e-18f,   0.0547174560812178f,   5.95977259058609e-18f },

    {  2.27873323134612e-18f,  -9.41663444978837e-18f,   1.000000000000000f,
      -1.13504123528046e-19f,  -1.01873804514454e-17f,   0.0547174560812178f }
};
const float K22[3][6] = { //better//200 0.2 100
    {  1.41421356237310f,  -9.39135566222773e-17f,  -4.66548194326727e-18f,
       0.0583586178811567f,   1.56985540470649e-18f,  -3.58469374447788e-19f },

    { -5.35160732790972e-17f,   1.41421356237310f,  -1.12810975909812e-16f,
      -3.03287097096084e-18f,   0.0583586178811566f,  -5.60002167480944e-18f },

    {  4.45949129275494e-18f,  -5.27108423612669e-17f,   1.41421356237310f,
       1.90668890158283e-19f,  -8.50347248312004e-18f,   0.0583586178811567f }
};

const float K33[3][6] = { //close 400 0.2 100
    {  2.00000000000000f,  -3.75416414629912e-16f,   2.32619227087933e-17f,
       0.0631506136153878f,  -9.71909003131067e-18f,   5.45816673257540e-19f },

    { -7.15548082117943e-17f,   2.00000000000000f,  -5.59889070097690e-17f,
       2.81600293841656e-18f,   0.0631506136153878f,  -2.68428209055328e-18f },

    {  2.10924095641678e-17f,  -1.11262441454091e-16f,   2.00000000000000f,
       1.62476424778548e-20f,  -4.41006105163925e-18f,   0.0631506136153878f }
};
const float K333[3][6] = {//too much 600 0.2 100
    {  2.44948974278318f,  -1.47395760654551e-16f,   1.59074328598793e-16f,
       0.0665942400236423f,  -2.85402858736220e-18f,   2.55405778709445e-18f },

    {  1.93302414811178e-17f,   2.44948974278318f,   3.57239458989196e-16f,
      -1.09076300526587e-18f,   0.0665942400236423f,   6.82013838600910e-18f },

    {  7.22719878868264e-17f,  -1.94286783946026e-16f,   2.44948974278318f,
       1.46957109237201e-19f,  -4.84729535877721e-18f,   0.0665942400236423f }
};
const float K4[3][6] = { // v close 400 0.3 100
    {  2.00000000000000f,   2.77572410909884e-16f,  -1.61753189917985e-17f,
       0.0706257743320383f,  1.38137997543859e-17f,  -1.58239160287663e-19f },

    { -1.22153768288521e-16f,   2.00000000000000f,  -9.88556894337112e-17f,
      -3.34388047257678e-18f,   0.0706257743320383f,  -3.04692976988466e-18f },

    {  6.80373695240263e-18f,   3.64875132826830e-17f,   2.00000000000000f,
       8.52795082467547e-20f,   2.15984584403968e-18f,   0.0706257743320383f }
};
const float K444[3][6] = { //vclose 400 0.5 100
    {  2.00000000000000f,  -2.52664782319005e-16f,  -6.73613276506724e-17f,
       0.0835942581760254f,   2.17518043068732e-18f,  -1.69777083288158e-18f },

    { -1.96158124944736e-16f,   2.00000000000000f,  -1.01253507677161e-16f,
      -4.81295144682548e-18f,   0.0835942581760255f,  -4.70343976074300e-18f },

    {  7.76134328084790e-17f,  -1.67830506842129e-16f,   2.00000000000000f,
       3.28201623580052e-18f,  -5.38949840887160e-18f,   0.0835942581760255f }
};

const float K[3][6] = { // 400 1 100
    {  2.00000000000000f,   1.21295414284221e-16f,  -4.91838222051363e-16f,
       0.109489725545368f,   3.30334965992075e-18f,   1.44895172081591e-17f },

    { -2.49988610250247e-16f,   2.00000000000000f,   2.18575157973078e-16f,
      -2.05079871419342e-17f,   0.109489725545368f,  -5.19332840620557e-17f },

    {  2.14476385922505e-16f,   5.92754823696259e-16f,   2.00000000000000f,
       1.30006951297446e-17f,   2.14818262114308e-17f,   0.109489725545368f }
};

























// Reference orientations
const float R_edge[3][3] = {
    {  0.70710678f,  0.0f,   0.70710678f },
    {  0.0f,         1.0f,   0.0f        },
    { -0.70710678f,  0.0f,   0.70710678f }
};


const float R_corner[3][3] = {
    {  0.81649658f,  0.00000000f,  0.57735027f },
    { -0.40824829f,  0.70710678f,  0.57735027f },
    { -0.40824829f, -0.70710678f,  0.57735027f }
};

// Control parameters
const float MAX_TILT_ANGLE = 20.0f * M_PI / 180.0f; // 20 degrees in radians
const float DES_RADs = 300.0f;
const float OVERSAT_RPM = 9500.0f;
const float TORQUE_SMOOTHING_ALPHA = 0.1f;

// Motor parameters
const int DSHOT_MIN_REVERSE = 48;
const int DSHOT_MAX_REVERSE = 1047;
const int DSHOT_MIN_FORWARD = 1048;
const int DSHOT_MAX_FORWARD = 2047;

#endif